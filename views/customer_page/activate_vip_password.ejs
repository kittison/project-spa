<style>
    .container-fluid {
        padding: 12px;
    }

    .form-control {
        background-color: rgba(175, 175, 175, 0.3);
    }

</style>

<div class="container-fluid">
    
    
    <div class="d-flex justify-content-center">
        <div class="">
            <div class="card card-body text-center" style="padding-left: 40px; padding-right: 40px;">
                <h3>ตั้งรหัสผ่านบัตร vip</h3>
            </div>
        </div>
    </div>

    <div class="d-flex justify-content-center pt-2" >
        <form class="card card-body w-100" id="activate" action="manage_vip/activate_password" method="post">
            <input type="number" name="id_update" class="d-none" value="<%=vip_id%>">
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">หมายเลขบัตร:</label>
                <label class="col-sm-10 col-form-label"><%=vip_id%></label>
            </div>
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">รหัสผ่าน:</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" id="pwd" name="pwd" >
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">ยืนยันรหัสผ่าน:</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" id="pwd2" name="pwd2">
                </div>
            </div>
            <div class="form-group row pt-2">
                <div class="col-sm-12">
                    <button type="submit" class="btn btn-primary w-100" style="padding: 10px;"
                        onclick="return vali('add')">ยืนยันการตั้งรหัสผ่าน
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<script src="/axios/axios.min.js"></script>
<script>
    
    function axios_validation(url,params,form_id,error_text){
        axios({
            url:url,
            method:'get',
            params:params,
            timeout:3000
        }).then((result)=>{
            if( result.data.status == 1){
                $(form_id).submit();
            }else{
                toastr.error(error_text)
            }
        }).catch(()=>{
            toastr.error("404 Error Not Found")
        });
    }

</script>

<script>

    function vali(mode){
        if(mode === "add"){
            let pwd = $("input[name=pwd]").val();
            let pwd2 = $("input[name=pwd2]").val();
            if( pwd != "" && pwd2 != "" && pwd == pwd2){
                $("#activate").submit();
            }else if(pwd != pwd2){
                toastr.error("ยืนยันรหัสผ่านไม่ถูกต้อง")
            }else{
                toastr.error("กรุณากรอกข้อมูลให้ครบถ้วน")
            }
            return false;
        }
    }
  
</script>